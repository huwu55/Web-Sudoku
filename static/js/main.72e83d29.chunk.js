(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(17)},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),u=n(2),s=n(1),i=n(3),l=n(4),d=n(6),m=n(5),v=n(7);function f(e){for(var t=[e],n=0;n<2;n++){for(var a=t[t.length-1],r=[],c=0;c<9;c+=3)c<=5?(r.push(a[c+3]),r.push(a[c+4]),r.push(a[c+5])):(r.push(a[0]),r.push(a[1]),r.push(a[2]));t.push(r)}return t}function p(){for(var e=function(){for(var e=[1,2,3,4,5,6,7,8,9],t=[];e.length>1;){var n=Math.floor(Math.random()*e.length);t.push(e[n]),e.splice(n,1)}return t.push(e[0]),t}(),t=[],n=Object(s.a)(e),a=Object(s.a)(e),r=0;r<3;r++){if(r>0){var c=Object(s.a)(n);c.shift(),a=[].concat(Object(s.a)(c),[n[0]])}var o=f(a);t.push(o[0],o[1],o[2]),n=Object(s.a)(a)}return t}function h(e){for(var t=[],n=[[0,1,2],[0,2,1],[1,0,2],[1,2,0],[2,0,1],[2,1,0]],a=0;a<9;a+=3){var r=n[Math.floor(Math.random()*n.length)];t.push(e[a+r[0]]),t.push(e[a+r[1]]),t.push(e[a+r[2]])}return t}var k=function(){var e=p();return e=h(e),e=h(e=function(e){for(var t=[],n=0;n<9;n++){for(var a=[],r=0;r<9;r++)a.push(e[r][n]);t.push(a)}return t}(e))},w=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).toggleClass=function(e,t){if(n.props.currentActive.row===n.props.row&&n.props.currentActive.column===n.props.column){var a=Object(s.a)(n.state.candidates),r=!a[e][t].active;a[e][t].active=r,n.setState({candidates:a})}},n.toggleClassKeyPress=function(e){if(n.props.candidateMode&&n.props.row===n.props.currentActive.row&&n.props.column===n.props.currentActive.column){if(0===n.props.guess&&(8===e.keyCode||46===e.keyCode)){for(var t=Object(s.a)(n.state.candidates),a=0;a<t.length;a++)for(var r=0;r<t[a].length;r++)t[a][r].active=!1;n.setState({candidates:t})}if(e.keyCode>=49&&e.keyCode<=57){var c=parseInt(String.fromCharCode(e.keyCode)),o=Object(s.a)(n.state.candidates);switch(c){case 1:o[0][0].active=!o[0][0].active;break;case 2:o[0][1].active=!o[0][1].active;break;case 3:o[0][2].active=!o[0][2].active;break;case 4:o[1][0].active=!o[1][0].active;break;case 5:o[1][1].active=!o[1][1].active;break;case 6:o[1][2].active=!o[1][2].active;break;case 7:o[2][0].active=!o[2][0].active;break;case 8:o[2][1].active=!o[2][1].active;break;case 9:o[2][2].active=!o[2][2].active}n.setState({candidates:o})}}},n.resetCandidates=function(){for(var e=Object(s.a)(n.state.candidates),t=0;t<3;t++)for(var a=0;a<3;a++)e[t][a].active=!1;n.setState({candidates:e})};for(var a=[],r=0;r<3;r++){for(var c=[],o=1;o<4;o++){var u={value:3*r+o,active:!1};c.push(u)}a.push(c)}return n.state={candidates:a},n}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.toggleClassKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.toggleClassKeyPress)}},{key:"componentDidUpdate",value:function(e){-1===this.props.currentActive.row&&-1===this.props.currentActive.column&&e.currentActive.row!==this.props.currentActive.row&&e.currentActive.column!==this.props.currentActive.row&&this.resetCandidates()}},{key:"render",value:function(){var e=this,t={};return this.props.display&&!this.props.revealed||(t={display:"none"}),r.a.createElement("div",{className:"candidates",style:t},!this.props.prefilled&&r.a.createElement("table",null,r.a.createElement("tbody",null,this.state.candidates.map(function(t,n){return r.a.createElement("tr",{key:"".concat(e.props.row).concat(e.props.column,"row").concat(n)},t.map(function(t,a){return r.a.createElement("td",{className:e.state.candidates[n][a].active?"activeCandidate":"",key:"".concat(e.props.row).concat(e.props.column,"column").concat(a),onClick:function(){return e.toggleClass(n,a)}},t.value)}))}))))}}]),t}(r.a.Component),g=function(e){var t="cell";return e.n.active&&(t+=" active"),0===e.n.conflicts.length||e.revealed||(t+=" conflict"),(e.n.prefilled||0!==e.n.guess||e.revealed)&&(t+=" digit"),r.a.createElement("td",{className:e.n.prefilled?"inactive":"",key:"".concat(e.n.row).concat(e.n.column)},r.a.createElement("div",{className:t,onClick:function(){return e.toggleClass(e.n)}},r.a.createElement("div",{className:"entry"},e.n.prefilled&&e.n.digit,0!==e.n.guess&&!e.revealed&&e.n.guess,!e.n.prefilled&&e.revealed&&e.n.digit),r.a.createElement(w,{guess:e.n.guess,row:e.n.row,column:e.n.column,prefilled:e.n.prefilled,display:0===e.n.guess,currentActive:e.currentActive,candidateMode:e.candidateMode,revealed:e.revealed})))},b=function(e){return r.a.createElement("div",{id:"instruction"},r.a.createElement("h3",null,r.a.createElement("u",null,"Classic Sudoku Rules")),r.a.createElement("p",null,"There are nine rows, nine columns, and nine 3x3 blocks. Fill in the empty cells with the numbers 1-9, without repeating any numbers within the row, column, or block."),r.a.createElement("h3",null,r.a.createElement("u",null,"How to Play")),r.a.createElement("p",null,"Click on each empty cell, enter your guess or candidates with keyboard by switching between ",r.a.createElement("strong",null,"Entry Mode")," or ",r.a.createElement("strong",null,"Candidate Mode"),". Hit Backspace or Delete to clear entries."))},C=function(e){var t="inputNum";-1===e.currentActive.row&&(t+=" inactive"),e.revealed&&(t+=" inactive");return r.a.createElement("div",{id:"inputOptions"},[1,2,3,4,5,6,7,8,9].map(function(n){return r.a.createElement("div",{key:n,className:e.guess===n?"".concat(t," entered"):t,onClick:function(){return e.handleInputNum(n)}},n)}))},E=function(e){return r.a.createElement("div",{id:"toolbar"},e.candidateMode&&r.a.createElement("div",{className:"entryMode",title:"Switch to Entry Mode",onClick:function(){return e.switchMode()}},r.a.createElement("i",{className:"material-icons"},"looks_one"),r.a.createElement("div",null,"Switch to Entry Mode")),!e.candidateMode&&r.a.createElement("div",{className:"entryMode",title:"Switch to Candidate Mode",onClick:function(){return e.switchMode()}},r.a.createElement("i",{className:"material-icons"},"grid_on"),r.a.createElement("div",null,"Switch to Candidate Mode")),!e.revealed&&r.a.createElement("button",{className:"revealall",onClick:function(){return e.revealAll()}},"Reveal all"),e.revealed&&r.a.createElement("button",{className:"back2answer",onClick:function(){return e.backToYourAnswer()}},"Back to your answer"),r.a.createElement("button",{className:"newgame",onClick:function(){return e.newGame()}},"New game"))},y=function(e){return r.a.createElement("div",{id:"sudokuCompleted"},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("span",{role:"img","aria-label":"congratulations"},"\ud83c\udf7b"),"Congratulations! You win!",r.a.createElement("span",{role:"img","aria-label":"congratulations"},"\ud83c\udf7b")),r.a.createElement("button",{className:"newgame",onClick:function(){return e.newGame()}},"New game")))},A=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).toggleClass=function(e){if(!e.prefilled){var t=Object(s.a)(n.state.sudoku);if(t[e.row][e.column].active=!0,-1===n.state.currentActive.row)n.setState({currentActive:{row:e.row,column:e.column},sudoku:t});else{if(e.row===n.state.currentActive.row&&e.column===n.state.currentActive.column)return;t[n.state.currentActive.row][n.state.currentActive.column].active=!1,n.setState({currentActive:{row:e.row,column:e.column},sudoku:t})}}},n.removeNumbers=function(e){for(var t=81,n=0;n<9;n++){for(var a=0;a<9&&(t>23&&Math.random()>23/81&&(e[n][a].prefilled=!1,t--),!(t<=17));a++);if(t<=17)break}return{sudoku_new:e,numPrefilled:t}},n.handleInputNumClick=function(e){if(-1!==n.state.currentActive.row&&!n.state.revealed){var t=Object(s.a)(n.state.sudoku);t[n.state.currentActive.row][n.state.currentActive.column].guess!==e&&(t[n.state.currentActive.row][n.state.currentActive.column].guess=e,n.setState({sudoku:t},function(){return n.checkConflict()}))}},n.handleInputKeyPress=function(e){if(-1!==n.state.currentActive.row&&!n.state.revealed&&(e.keyCode>=49&&e.keyCode<=57||8===e.keyCode||46===e.keyCode)){var t=Object(s.a)(n.state.sudoku),a=parseInt(String.fromCharCode(e.keyCode)),r=t[n.state.currentActive.row][n.state.currentActive.column],c=n.state.numGuessed;if(n.state.candidateMode)0!==r.guess&&(r.guess=0,c--);else{if(r.guess===a)return;8===e.keyCode||46===e.keyCode?0!==r.guess&&(r.guess=0,c--):(0===r.guess&&c++,r.guess=a)}t[n.state.currentActive.row][n.state.currentActive.column]=r,n.setState({sudoku:t,numGuessed:c},function(){n.checkConflict()||n.state.numPrefilled+n.state.numGuessed===81&&n.checkIfCompletedSudoku()})}},n.updateConflicts=function(e,t,n){for(var a=0;a<n.conflicts.length;a++)for(var r=Object(u.a)({},n.conflicts[a]),c=Object(s.a)(e[r.row][r.column].conflicts),o=0;o<c.length;o++)if(c[o].row===t.row&&c[o].column===t.column){c.splice(o,1),e[r.row][r.column].conflicts=Object(s.a)(c);break}return e},n.checkRowConflicts=function(e,t,n){for(var a=0;a<9;a++)a!==t.column&&(e[t.row][a].prefilled&&e[t.row][a].digit===n.guess||!e[t.row][a].prefilled&&e[t.row][a].guess===n.guess)&&(n.conflicts.push({row:t.row,column:a}),e[t.row][a].conflicts.push(t));return{sudoku:e,currentGrid:n}},n.checkColumnConflicts=function(e,t,n){for(var a=0;a<9;a++)a!==t.row&&(e[a][t.column].prefilled&&e[a][t.column].digit===n.guess||!e[a][t.column].prefilled&&e[a][t.column].guess===n.guess)&&(n.conflicts.push({row:a,column:t.column}),e[a][t.column].conflicts.push(t));return{sudoku:e,currentGrid:n}},n.checkNonetConflicts=function(e,t,n){var a,r;switch(t.row%3){case 0:a=t.row;break;case 1:a=t.row-1;break;case 2:a=t.row-2;break;default:a=-1}switch(t.column%3){case 0:r=t.column;break;case 1:r=t.column-1;break;case 2:r=t.column-2;break;default:r=-1}for(var c=0;c<3;c++)for(var o=0;o<3;o++){var u=a+c,s=r+o;u!==t.row&&s!==t.column&&((e[u][s].prefilled&&e[u][s].digit===n.guess||!e[u][s].prefilled&&e[u][s].guess===n.guess)&&(n.conflicts.push({row:u,column:s}),e[u][s].conflicts.push(t)))}return{sudoku:e,currentGrid:n}},n.checkConflict=function(){var e=Object(s.a)(n.state.sudoku),t=Object(u.a)({},n.state.currentActive),a=Object(u.a)({},e[t.row][t.column]);e=n.updateConflicts(e,t,a),a.conflicts=[];var r=n.checkRowConflicts(e,t,a);e=r.sudoku,a=r.currentGrid;var c=n.checkColumnConflicts(e,t,a);e=c.sudoku,a=c.currentGrid;var o=n.checkNonetConflicts(e,t,a);return e=o.sudoku,a=o.currentGrid,e[t.row][t.column]=Object(u.a)({},a),n.setState({sudoku:e}),0!==a.conflicts.length},n.newGame=function(){var e=k().map(function(e,t){return e.map(function(e,n){return{digit:e,guess:0,prefilled:!0,conflicts:[],active:!1,row:t,column:n}})}),t=n.removeNumbers(e),a=t.sudoku_new,r=t.numPrefilled;n.setState({sudoku:a,currentActive:{row:-1,column:-1},revealed:!1,candidateMode:!1,numPrefilled:r,numGuessed:0,completed:!1})},n.revealAll=function(){n.setState({revealed:!0})},n.backToYourAnswer=function(){n.setState({revealed:!1})},n.switchMode=function(){var e=n.state.candidateMode;n.setState({candidateMode:!e})},n.checkIfCompletedSudoku=function(){for(var e=n.state.sudoku,t=!0,a=0;a<e.length;a++){for(var r=0;r<e[a].length;r++)if(!e[a][r].prefilled&&e[a][r].guess!==e[a][r].digit){console.log(a,r),t=!1;break}if(!t)break}n.setState({completed:t})};var a=k().map(function(e,t){return e.map(function(e,n){return{digit:e,guess:0,prefilled:!0,conflicts:[],active:!1,row:t,column:n}})}),r=n.removeNumbers(a),c=r.sudoku_new,o=r.numPrefilled;return n.state={sudoku:c,currentActive:{row:-1,column:-1},revealed:!1,candidateMode:!1,numPrefilled:o,numGuessed:0,completed:!1},n}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleInputKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleInputKeyPress)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"game"},r.a.createElement(b,null),r.a.createElement(E,{candidateMode:this.state.candidateMode,switchMode:this.switchMode,newGame:this.newGame,revealAll:this.revealAll,backToYourAnswer:this.backToYourAnswer,revealed:this.state.revealed,restart:this.restart}),r.a.createElement("div",{id:"gameboard"},r.a.createElement("table",null,r.a.createElement("tbody",null,this.state.sudoku.map(function(t,n){return r.a.createElement("tr",{key:n},t.map(function(t){return r.a.createElement(g,{key:"".concat(t.row).concat(t.column),n:t,toggleClass:e.toggleClass,revealed:e.state.revealed,candidateMode:e.state.candidateMode,currentActive:e.state.currentActive})}))}))),r.a.createElement(C,{guess:-1!==this.state.currentActive.row?this.state.sudoku[this.state.currentActive.row][this.state.currentActive.column].guess:0,currentActive:this.state.currentActive,handleInputNum:this.handleInputNumClick,revealed:this.state.revealed})),this.state.completed&&r.a.createElement(y,{newGame:this.newGame}))}}]),t}(r.a.Component),M=function(){return r.a.createElement("div",{id:"footer"},"Web Sudoku \xa92019\xa0",r.a.createElement("a",{title:"Github",href:"https://github.com/huwu55/Web-Sudoku",target:"_blank",rel:"noopener noreferrer"},"Huiling Wu ",r.a.createElement("i",{className:"fab fa-github"})))};n(9),n(16);o.a.render(r.a.createElement(function(){return r.a.createElement("div",{id:"app",className:"wrapper"},r.a.createElement("h1",{id:"sudokuTitle"},"SUDOKU"),r.a.createElement(A,null),r.a.createElement(M,null))},null),document.getElementById("root"))},9:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.72e83d29.chunk.js.map